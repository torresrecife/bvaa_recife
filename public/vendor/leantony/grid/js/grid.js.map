{"version":3,"sources":["../../js/grid.js"],"names":[],"mappings":"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","file":"grid.js","sourcesContent":["/*\n * Copyright (c) 2018.\n * @author Antony [leantony] Chacha\n */\n\n'use strict';\nconst _grids = _grids || {};\n\n(($ => {\n\n  if (typeof $ === 'undefined') {\n    throw new Error('Requires jQuery');\n  }\n\n  /**\n   * Shared utilities\n   *\n   * @type object\n   * @public\n   */\n  _grids.utils = {};\n\n  (($ => {\n    /**\n     * Handle an ajax request from a button, form, link, etc\n     *\n     * @param element\n     * @param event\n     * @param options\n     */\n    _grids.utils.handleAjaxRequest = (element, event, options) => {\n      event = event || 'click';\n      if (element.length < 1) return;\n\n      element.each((i, obj) => {\n        obj = $(obj);\n        // confirmation\n        const confirmation = obj.data('trigger-confirm');\n        const confirmationMessage = obj.data('confirmation-msg') || 'Are you sure?';\n        const pjaxContainer = obj.data('pjax-target');\n        const refresh = obj.data('refresh-page');\n        const isForm = obj.is('form');\n\n        obj.on(event, e => {\n          e.preventDefault();\n          if (confirmation) {\n            if (!confirm(confirmationMessage)) {\n              return;\n            }\n          }\n          $.ajax({\n            method: isForm ? obj.attr('method') : (obj.data('method') || 'POST'),\n            url: isForm ? obj.attr('action') : obj.attr('href'),\n            data: isForm ? obj.serialize() : null,\n            beforeSend() {\n              if(options.beforeSend) {\n                options.beforeSend.call(this)\n              }\n            },\n            complete() {\n              if(options.onComplete) {\n                options.onComplete.call(this)\n              }\n            },\n            success(data) {\n              if (pjaxContainer) {\n                $.pjax.reload({container: pjaxContainer});\n              }\n            },\n            error(data) {\n              if (typeof toastr !== 'undefined') {\n                toastr.error('An error occurred', 'Whoops!');\n              } else {\n                alert('An error occurred');\n              }\n            },\n          });\n        });\n      });\n    };\n\n    /**\n     * Linkable rows on tables (rows that can be clicked to navigate to a location)\n     */\n    _grids.utils.tableLinks = options => {\n      if (!options) {\n        console.warn('No options defined.');\n      } else {\n        const elements = $(options.element);\n        elements.each((i, obj) => {\n          const el = $(obj);\n          const link = el.data('url');\n          el.css({'cursor': 'pointer'});\n          el.click(e => {\n            setTimeout(() => {\n              window.location = link;\n            }, options.navigationDelay || 100);\n          });\n        });\n      }\n    };\n  }))(jQuery);\n\n  /**\n   * The global grid object\n   *\n   * @type object\n   * @public\n   */\n  _grids.grid = {};\n\n  (($ => {\n    /**\n     * Initialization\n     *\n     * @param opts\n     */\n    class grid {\n      constructor(opts) {\n\n        const defaults = {\n          /**\n           * The ID of the html element containing the grid\n           */\n          id: '#some-grid',\n          /**\n           * The ID of the html element containing the filter form\n           */\n          filterForm: undefined,\n          /**\n           * The ID of the html element containing the search form\n           */\n          searchForm: undefined,\n          /**\n           * The CSS class of the columns that are sortable\n           */\n          sortLinks: 'data-sort',\n          /**\n           * The selector of a date range filter\n           */\n          dateRangeSelector: '.date-range',\n          /**\n           * PJAX\n           */\n          pjax: {\n            /**\n             * Any extra pjax plugin options\n             */\n            pjaxOptions: {},\n\n            /**\n             * Something to do once the PJAX request has been finished\n             */\n            afterPjax(e) {\n            },\n          },\n        };\n        this.opts = $.extend({}, defaults, opts || {});\n      }\n\n      /**\n       * Enable pjax\n       *\n       * @param container the root element for which html contents shall be replaced\n       * @param target the element in the root element that will trigger the pjax request\n       * @param afterPjax a function that will be executed after the pjax request is done\n       * @param options\n       */\n      setupPjax(container, target, afterPjax, options) {\n        // global timeout\n        $.pjax.defaults.timeout = options.timeout || 3000;\n        $(document).pjax(target, container, options);\n        $(document).on('ready pjax:end', event => {\n          afterPjax($(event.target));\n          // internal calls\n          setupDateRangePicker(this);\n        });\n      }\n\n      /**\n       * Initialize pjax functionality\n       */\n      bindPjax() {\n        this.setupPjax(\n            this.opts.id,\n            'a[data-trigger-pjax=1]',\n            this.opts.pjax.afterPjax,\n            this.opts.pjax.pjaxOptions,\n        );\n\n        setupDateRangePicker(this);\n      }\n\n      /**\n       * Pjax per row filter\n       */\n      filter() {\n        const form = $(this.opts.filterForm);\n\n        if (form.length > 0) {\n          $(document).on('submit', this.opts.filterForm, event => {\n            $.pjax.submit(event, this.opts.id, this.opts.pjax.pjaxOptions);\n          });\n        }\n      }\n\n      /**\n       * Pjax search\n       */\n      search() {\n        const form = $(this.opts.searchForm);\n\n        if (form.length > 0) {\n          $(document).on('submit', this.opts.searchForm, event => {\n            $.pjax.submit(event, this.opts.id, this.opts.pjax.pjaxOptions);\n          });\n        }\n      }\n    }\n\n    /**\n     * Setup date range picker\n     *\n     * @param instance\n     */\n    function setupDateRangePicker(instance) {\n      if (instance.opts.dateRangeSelector) {\n        if (typeof daterangepicker !== 'function') {\n          console.warn('date range picker option requires https://github.com/dangrossman/bootstrap-daterangepicker.git');\n        } else {\n          const start = moment().subtract(29, 'days');\n          const end = moment();\n          const element = $(instance.opts.dateRangeSelector);\n          element.daterangepicker({\n            startDate: start,\n            endDate: end,\n            ranges: {\n              'Last 7 Days': [\n                  moment().subtract(6, 'days'), moment()\n              ],\n              'Last 30 Days': [\n                  moment().subtract(29, 'days'), moment()\n              ],\n              'This Month': [\n                moment().startOf('month'), moment().endOf('month')\n              ],\n              'Last Month': [\n                moment().subtract(1, 'month').startOf('month'),\n                moment().subtract(1, 'month').endOf('month')\n              ],\n            },\n            autoUpdateInput: false,\n            locale: {\n              format: 'YYYY-MM-DD',\n              cancelLabel: 'Clear',\n            },\n          });\n\n          element.on('apply.daterangepicker', function(ev, picker) {\n            $(this).val(picker.startDate.format('YYYY-MM-DD') + ' - ' + picker.endDate.format('YYYY-MM-DD'));\n          });\n\n          element.on('cancel.daterangepicker', function(ev, picker) {\n            $(this).val('');\n          });\n        }\n      }\n    }\n\n    _grids.grid.init = options => {\n      const obj = new grid(options);\n      obj.bindPjax();\n      obj.search();\n      obj.filter();\n    };\n  }))(jQuery);\n\n  _grids.formUtils = {\n    /**\n     * Return html that can be used to render a bootstrap alert on the form\n     *\n     * @param type\n     * @param response\n     * @returns {string}\n     */\n    renderAlert(type, response) {\n      const validTypes = ['success', 'error', 'notice'];\n      let html = '';\n      if (typeof type === 'undefined' || ($.inArray(type, validTypes) < 0)) {\n        type = validTypes[0];\n      }\n      if (type === 'success') {\n        html += '<div class=\"alert alert-success\">';\n      }\n      else if (type === 'error') {\n        html += '<div class=\"alert alert-danger\">';\n      } else {\n        html += '<div class=\"alert alert-warning\">';\n      }\n      html += '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">&times;</button>';\n      // add a heading\n      if (type === 'error') {\n        if(response.serverError) {\n          html += response.serverError.message || 'A server error occurred.';\n          html = `<strong>${html}</strong>`;\n          return html;\n        } else {\n          html += response.message || 'Please fix the following errors';\n          html = `<strong>${html}</strong>`;\n          const errs = this.getValidationErrors(response.errors || {});\n          return `${html + errs}</div>`;\n        }\n      } else {\n        return `${html + response}</div>`;\n      }\n    },\n\n    /**\n     * process validation errors from json to html\n     * @param response\n     * @returns {string}\n     */\n    getValidationErrors(response) {\n      let errorsHtml = '';\n      $.each(response, (key, value) => {\n        errorsHtml += `<li>${value}</li>`;\n      });\n      return errorsHtml;\n    },\n\n    /**\n     * Form submission from a modal dialog\n     *\n     * @param formId\n     * @param modal\n     */\n    handleFormSubmission(formId, modal) {\n      const form = $(`#${formId}`);\n      const submitButton = form.find(':submit');\n      const data = form.serialize();\n      const action = form.attr('action');\n      const method = form.attr('method') || 'POST';\n      const originalButtonHtml = $(submitButton).html();\n      const pjaxTarget = form.data('pjax-target');\n      const notification = form.data('notification-el') || 'modal-notification';\n      const _this = this;\n\n      $.ajax({\n        type: method,\n        url: action,\n        data,\n        dataType: 'json',\n        success(response) {\n          if (response.success) {\n            let message = '<i class=\\\"fa fa-check\\\"></i> ';\n            message += response.message;\n            $(`#${notification}`).html(_this.renderAlert('success', message));\n            // if a redirect is required...\n            if (response.redirectTo) {\n              setTimeout(() => {\n                window.location = response.redirectTo;\n              }, response.redirectTimeout || 500);\n            } else {\n              // hide the modal after 1000 ms\n              setTimeout(() => {\n                modal.modal('hide');\n                if (pjaxTarget) {\n                  // reload a pjax container\n                  $.pjax.reload({container: pjaxTarget});\n                }\n              }, 500);\n            }\n          }\n          else {\n            // display message and hide modal\n            const el = $(notification);\n            el.html(_this.renderAlert('error', response.message));\n            setTimeout(() => {\n              modal.modal('hide');\n            }, 500);\n          }\n        },\n        beforeSend() {\n          $(submitButton).attr('disabled', 'disabled').html('<i class=\"fa fa-spinner fa-spin\"></i>&nbsp;loading');\n        },\n        complete() {\n          $(submitButton).html(originalButtonHtml).removeAttr('disabled');\n        },\n        error(data) {\n          let msg;\n          // error handling\n          switch (data.status) {\n            case 500:\n              msg = _this.renderAlert('error', {serverError: {message: \"An error occurred on the server.\"}});\n              break;\n            default:\n              msg = _this.renderAlert('error', data.responseJSON);\n              break;\n          }\n          // display errors\n          const el = $(`#${notification}`);\n          el.html(msg);\n        },\n      });\n    },\n  };\n\n  /**\n   * The global modal object\n   *\n   * @type object\n   * @public\n   */\n  _grids.modal = {};\n\n  (($ => {\n    class modal {\n      constructor(options) {\n        const defaultOptions = {};\n        this.options = $.extend({}, defaultOptions, options || {});\n      }\n\n      /**\n       * Show a modal dialog dynamically\n       */\n      show() {\n        $('.show_modal_form').on('click', function(e) {\n          e.preventDefault();\n          const btn = $(this);\n          const btnHtml = btn.html();\n          const modalDialog = $('#bootstrap_modal');\n          const modalSize = btn.data('modal-size');\n          // show spinner as soon as user click is triggered\n          btn.attr('disabled', 'disabled').html('<i class=\"fa fa-spinner fa-spin\"></i>&nbsp;loading');\n\n          // load the modal into the container put on the html\n          $('.modal-content').\n              load($(this).attr('href') || $(this).data('href'), () => {\n                // show the modal\n                $('#bootstrap_modal').modal({ show: true });\n                // alter size\n                if (modalSize) {\n                  $('.modal-content').parent('div').addClass(modalSize);\n                }\n              });\n\n          // revert button to original content, once the modal is shown\n          modalDialog.on('shown.bs.modal', e => {\n            $(btn).html(btnHtml).removeAttr('disabled');\n          });\n\n          // destroy the modal\n          modalDialog.on('hidden.bs.modal', function(e) {\n            $(this).modal('dispose');\n          });\n        });\n      }\n    }\n\n    $('#bootstrap_modal').\n        on('click', '#' + 'modal_form' + ' button[type=\"submit\"]', e => {\n          e.preventDefault();\n          // process forms on the modal\n          _grids.formUtils.handleFormSubmission('modal_form', $('#bootstrap_modal'));\n        });\n\n    _grids.modal.init = options => {\n      const obj = new modal(options);\n      obj.show();\n    };\n  })(jQuery));\n\n  /**\n   * Initialize stuff\n   */\n  _grids.init = () => {\n    // date picker\n    if (typeof daterangepicker !== 'function') {\n      console.warn('date picker option requires https://github.com/dangrossman/bootstrap-daterangepicker.git');\n    } else {\n      const element = $('.grid-datepicker');\n      element.daterangepicker({\n        singleDatePicker: true,\n        showDropdowns: true,\n        autoUpdateInput: false,\n        minYear: 1901,\n        locale: {\n          format: 'YYYY-MM-DD',\n        },\n      });\n\n      element.on('apply.daterangepicker', function(ev, picker) {\n        $(this).val(picker.startDate.format('YYYY-MM-DD'));\n      });\n\n      element.on('cancel.daterangepicker', function(ev, picker) {\n        $(this).val('');\n      });\n    }\n    // initialize modal js\n    _grids.modal.init({});\n    // table links\n    _grids.utils.tableLinks({element: '.linkable', navigationDelay: 100});\n    // setup ajax listeners\n    _grids.utils.handleAjaxRequest($('.data-remote'), 'click', {});\n  };\n\n  return _grids;\n}))(jQuery);\n\n_grids.init();\n"]}